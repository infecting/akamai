import requests
import sys

def get_origin_cookies():
  headers = {
      'Connection': 'keep-alive',
      'sec-ch-ua': '" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',
      'sec-ch-ua-mobile': '?0',
      'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36',
      'sec-ch-ua-platform': '"macOS"',
      'Content-Type': 'text/plain;charset=UTF-8',
      'Accept': '*/*',
      'Origin': 'https://www.fedex.com',
      'Sec-Fetch-Site': 'same-origin',
      'Sec-Fetch-Mode': 'cors',
      'Sec-Fetch-Dest': 'empty',
      'Referer': 'https://www.fedex.com/secure-login/en-us/',
      'Accept-Language': 'en-US,en;q=0.9',
  }

  data = '{"sensor_data":"7a74G7m23Vrp0o5c9226461.7-1,2,-94,-100,Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.109 Safari/537.36,uaend,12147,20030107,en-US,Gecko,5,0,0,0,405179,4861120,1440,814,1440,900,684,703,1440,,cpen:0,i1:0,dm:0,cwen:0,non:1,opc:0,fc:0,sc:0,wrc:1,isc:0,vib:1,bat:1,x11:0,x12:1,8988,0.810822056405,823377430560,0,loc:-1,2,-94,-101,do_en,dm_en,t_en-1,2,-94,-105,0,-1,0,1,1386,447,0;1,0,0,1,1649,331,0;0,-1,0,0,1498,-1,0;-1,2,-94,-102,0,-1,0,1,1386,447,0;1,0,0,1,1649,331,0;0,-1,0,0,1498,-1,0;-1,2,-94,-108,0,1,8167,91,0,2,-1;1,1,8214,65,0,2,-1;2,2,8301,-2,0,0,-1;3,2,8308,-2,0,0,-1;4,1,8322,8,0,0,-1;5,2,8397,8,0,0,-1;-1,2,-94,-110,0,1,219,1007,148;1,1,229,1004,148;2,1,245,993,153;3,1,262,982,160;4,1,279,968,169;5,1,296,948,181;6,1,312,923,197;7,1,329,907,208;8,1,346,889,219;9,1,362,868,231;10,1,765,867,231;11,1,778,865,231;12,1,796,859,231;13,1,811,850,233;14,1,828,838,236;15,1,845,825,238;16,1,862,807,242;17,1,879,795,245;18,1,895,780,248;19,1,912,765,251;20,1,929,733,254;21,1,945,715,254;22,1,962,707,254;23,3,1354,707,254,-1,3;24,1,2805,858,583;25,1,2812,841,113;26,1,6713,661,103;27,1,6713,661,103;28,1,6720,638,114;29,1,6728,560,154;30,1,6735,541,165;31,1,6751,505,188;32,1,6751,475,210;33,1,6760,465,217;34,1,6767,458,223;35,1,6775,443,235;36,1,6783,440,239;37,1,6807,426,252;38,1,6807,421,262;39,1,6814,420,271;40,1,6822,420,280;41,1,6830,427,290;42,1,6838,438,302;43,1,6847,446,308;44,1,6854,457,319;45,1,6862,462,324;46,1,6870,465,327;47,1,6881,471,334;48,1,6885,476,338;49,1,6893,479,341;50,1,6901,482,343;51,1,6909,485,345;52,1,6916,488,347;53,1,6924,493,348;54,1,6932,499,350;55,1,6940,507,351;56,1,6948,517,352;57,1,6956,529,352;58,1,6964,540,352;59,1,6972,552,348;60,1,6980,563,341;61,1,6987,573,334;62,1,6996,583,323;63,1,7003,591,311;64,1,7011,597,298;65,1,7019,600,284;66,1,7027,603,270;67,1,7035,603,257;68,1,7043,603,244;69,1,7051,603,230;70,1,7059,598,219;71,1,7067,590,208;72,1,7074,580,198;73,1,7083,568,192;74,1,7091,556,188;75,1,7098,541,188;76,1,7107,518,188;77,1,7114,502,195;78,1,7122,485,208;79,1,7131,470,223;80,1,7138,464,231;81,1,7146,452,248;82,1,7154,443,265;83,1,7162,440,272;84,3,7180,440,272,-1;85,1,7205,437,277;86,1,7206,435,282;87,1,7215,435,284;88,1,7229,435,287;89,4,7378,435,287,-1;90,2,7378,435,287,-1;91,1,7398,434,287;92,1,7405,432,287;93,1,7413,429,287;94,1,7421,426,287;95,1,7429,423,287;96,1,7437,421,287;97,1,7445,421,287;98,1,7453,419,287;99,1,7461,417,287;100,1,7468,417,287;101,1,7476,416,287;102,1,7500,418,287;103,1,7508,427,287;126,3,9916,523,269,-1;128,4,10011,523,269,-1;129,2,10012,523,269,-1;195,3,10846,428,141,-1;-1,2,-94,-117,-1,2,-94,-111,-1,2,-94,-109,-1,2,-94,-114,-1,2,-94,-103,2,2973;3,7178;2,8813;3,9913;-1,2,-94,-112,https://www.fedex.com/global/choose-location.html-1,2,-94,-115,49900,708395,32,0,0,0,758262,10846,0,1646754861120,50,17616,6,196,2936,6,0,10848,661422,0,63976A78CD21CCF9FF1865FEADDAA90A~0~YAAQDDzXF60dI2R/AQAALBk9agcxklY1PyfYIaF5dyQ5QdpQeG2Dyta12Gy/XNIcmS5WNauZ7IngNw2qr9Y1jXt/i6i9lnUzZtL/sJS13UQ0/BOMoKO+6Qur89cEpOzWo7nQxx5yps71pCvZ50cUOtEqEoQ84z2tOC1jLPxYqUzE3GllP0FKNNc8YsX4POiOG8T6taPkVF//VRlISNCLWo1PULjyFqoG20zgikMPW6p6J98Ms7Bun6SJCHjdVMqN1ZsQi6QikvYLZPlFXKxvEMF2hl2NoJqdy1g25sEr1Zx6jSXEWqdgxbS7z1IZLg6i22g2cDtp3hQgASQ0rmJVrPIGUbhPzuzslRzd7fDwjgdsxav/oHXo0j1XXAL/yMZeL4CGd+MdPvja1k/2mzc0syzhbLKtlbg=~-1~-1~-1,38384,132,-1748282709,30261693,PiZtE,43406,63,0,-1-1,2,-94,-106,1,0-1,2,-94,-119,20,20,20,20,40,40,20,0,20,0,0,0,20,160,-1,2,-94,-122,0,0,0,0,1,0,0-1,2,-94,-123,-1,2,-94,-124,-1,2,-94,-126,-1,2,-94,-127,11321144241322243122-1,2,-94,-70,1838552554;-59864811;dis;,7;true;true;true;360;true;30;30;true;false;-1-1,2,-94,-80,5391-1,2,-94,-116,14583342-1,2,-94,-118,202787-1,2,-94,-129,-1,2,-94,-121,;6;5;0"}'

  response = requests.post('https://www.fedex.com/BRHTdBpDYV64H2X4ow/a3az4JfQ1X/eVAlAg/ICczOTRn/Mmg', headers=headers, data=data)
  
  print("done")
  get_cookie(response.cookies["bm_sz"])

def get_cookie(bm_sz):
  cookies = {
      'Rbt': 'f0',
      'bm_sz': bm_sz,
  }

  headers = {
      'Connection': 'keep-alive',
      'sec-ch-ua': '" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',
      'sec-ch-ua-mobile': '?0',
      'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36',
      'sec-ch-ua-platform': '"macOS"',
      'Content-Type': 'text/plain;charset=UTF-8',
      'Accept': '*/*',
      'Origin': 'https://www.fedex.com',
      'Sec-Fetch-Site': 'same-origin',
      'Sec-Fetch-Mode': 'cors',
      'Sec-Fetch-Dest': 'empty',
      'Referer': 'https://www.fedex.com/en-us/home.html',
      'Accept-Language': 'en-US,en;q=0.9',
  }

  data = {"sensor_data":"7a74G7m23Vrp0o5c9226131.7-1,2,-94,-100,Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36,uaend,12147,20030107,en-US,Gecko,5,0,0,0,405158,9298601,1440,816,1440,900,848,771,848,,cpen:0,i1:0,dm:0,cwen:0,non:1,opc:0,fc:0,sc:0,wrc:1,isc:0,vib:1,bat:1,x11:0,x12:1,8938,0.93566155467,823334648296,0,loc:-1,2,-94,-101,do_en,dm_en,t_en-1,2,-94,-105,0,-1,0,0,1498,-1,0;0,-1,0,1,2588,1468,0;0,-1,0,1,1500,1500,0;0,-1,0,1,1684,1684,0;0,-1,0,1,1684,1684,0;0,-1,0,1,1684,1684,0;0,-1,0,1,2563,-1,0;-1,2,-94,-102,0,-1,0,0,1498,-1,0;0,-1,0,1,2588,1468,0;0,-1,0,1,1500,1500,0;0,-1,0,1,1684,1684,0;0,-1,0,1,1684,1684,0;0,-1,0,1,1684,1684,0;0,-1,0,1,2563,-1,0;-1,2,-94,-108,-1,2,-94,-110,0,1,2017,1433,695;1,1,2019,1432,698;2,1,2024,1430,701;3,1,2027,1428,703;4,1,2032,1427,706;5,1,2033,1425,708;6,1,2038,1422,710;7,1,2043,1420,712;8,1,2048,1418,713;9,1,2050,1415,715;10,1,2050,1412,716;11,1,2051,1410,718;12,1,2052,1407,719;13,1,2054,1403,719;14,1,2059,1400,720;15,1,2063,1397,721;16,1,2066,1393,721;17,1,2071,1390,721;18,1,2075,1386,722;19,1,2079,1382,722;20,1,2079,1379,721;21,1,2083,1375,721;22,1,2085,1370,721;23,1,2089,1366,720;24,1,2091,1362,719;25,1,2091,1358,718;26,1,2091,1353,717;27,1,2091,1349,716;28,1,2094,1344,715;29,1,2094,1340,714;30,1,2098,1335,712;31,1,2098,1330,710;32,1,2099,1325,709;33,1,2099,1320,707;34,1,2102,1315,705;35,1,2104,1310,703;36,1,2106,1305,700;37,1,2110,1300,698;38,1,2112,1295,696;39,1,2114,1290,693;40,1,2117,1285,690;41,1,2117,1279,687;42,1,2120,1274,684;43,1,2123,1269,681;44,1,2128,1264,678;45,1,2129,1258,675;46,1,2132,1253,672;47,1,2137,1248,668;48,1,2138,1242,665;49,1,2141,1237,661;50,1,2141,1231,657;51,1,2145,1226,654;52,1,2150,1221,650;53,1,2155,1215,646;54,1,2156,1210,642;55,1,2161,1205,638;56,1,2164,1199,633;57,1,2168,1194,629;58,1,2170,1189,625;59,1,2175,1183,620;60,1,2178,1178,616;61,1,2178,1173,611;62,1,2180,1168,607;63,1,2185,1163,602;64,1,2186,1158,597;65,1,2191,1153,592;66,1,2194,1148,587;67,1,2198,1143,582;68,1,2202,1138,577;69,1,2204,1133,572;70,1,2207,1129,567;71,1,2208,1124,562;72,1,2209,1120,556;73,1,2209,1115,551;74,1,2211,1111,546;75,1,2215,1106,540;76,1,2218,1102,535;77,1,2223,1098,529;78,1,2224,1094,524;79,1,2224,1090,518;80,1,2229,1086,513;81,1,2231,1082,507;82,1,2231,1079,501;83,1,2232,1075,496;84,1,2233,1072,490;85,1,2234,1068,484;86,1,2235,1065,478;87,1,2236,1062,472;88,1,2239,1059,466;89,1,2244,1056,461;90,1,2246,1054,455;91,1,2249,1051,449;92,1,2249,1049,443;93,1,2253,1047,437;94,1,2254,1044,431;95,1,2255,1042,425;96,1,2260,1041,419;97,1,2261,1039,413;98,1,2263,1037,407;99,1,2263,1036,401;-1,2,-94,-117,-1,2,-94,-111,-1,2,-94,-109,-1,2,-94,-114,-1,2,-94,-103,0,1,70,857,382;-1,2,-94,-112,https://www.fedex.com/global/choose-location.html-1,2,-94,-115,1,32,32,0,0,0,0,2013,0,1646669296592,16,17615,0,0,2935.9337126372957,0,0,2013,4989478,0,2,0,892,-1604630381,0,PiZtE,71839,57,0,-1-1,2,-94,-106,1-1,2,-94,-119,-1,2,-94,-119,10,14,13,9,31,31,12,10,10,6,6,6,12,377,-1,2,-94,-122,0,0,0,0,1,0,0-1,2,-94,-123,-1,2,-94,-124,-1,2,-94,-126,-1,2,-94,-127,10321144241322243122-1,2,-94,-70,1838552554;-59864811;dis;,7;true;true;true;360;true;30;30;true;false;-1-1,2,-94,-80,5391-1,2,-94,-116,251062122-1,2,-94,-118,8a85c9aded2f51e6febfeebd1dd5e89f5af0acaff1f145dc4f501bf22c812cb7,2,a36da050b0f51a16f54a795a9f3c639049813854fbb69c3169a0ae7a7ac1eadb,Apple,Apple M1,a25b5fc7a716e4dde8662385f1a6a7fb9ab1729640bbf1d89c48df1ba36ab89b,0;14;3;0"}

  response = requests.post('https://www.fedex.com/BRHTdBpDYV64H2X4ow/a3az4JfQ1X/eVAlAg/ICczOTRn/Mmg', headers=headers, cookies=cookies, json=data)
  print(response.cookies["_abck"])

def test_cookie(ak_bmsc, bm_sz, abck):
  cookies = {
      'JSESSIONID': '9817B0FA4E93F51548E1E6D066924EE7',
      'ak_bmsc': ak_bmsc,
      'bm_sz': bm_sz,
      'AMCVS_1E22171B520E93BF0A490D44%40AdobeOrg': '1',
      '_abck': abck,
      'AMCV_1E22171B520E93BF0A490D44%40AdobeOrg': '359503849%7CMCIDTS%7C19032%7CMCMID%7C07176893139643360227284596923263896666%7CMCAID%7CNONE%7CMCOPTOUT-1644354626s%7CNONE%7CvVersion%7C5.0.1',
  }

  headers = {
      'authority': 'api.fedex.com',
      'sec-ch-ua': '" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',
      'x-locale': 'en_US',
      'x-loggedin': 'true',
      'x-clientid': 'WLGN',
      'sec-ch-ua-mobile': '?0',
      'authorization': 'Bearer l75c4815a4147d44e6af1de680e269508c',
      'content-type': 'application/json',
      'accept': 'application/json, text/plain, */*',
      'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36',
      'x-version': '1.0',
      'sec-ch-ua-platform': '"macOS"',
      'origin': 'https://www.fedex.com',
      'sec-fetch-site': 'same-site',
      'sec-fetch-mode': 'cors',
      'sec-fetch-dest': 'empty',
      'referer': 'https://www.fedex.com/secure-login/en-us/',
      'accept-language': 'en-US,en;q=0.9',
  }

  data = {
    '{"userName":"test","password":"test","deviceId":"","deviceFp":"{\\"VERSION\\":\\"2.1.2\\",\\"MFP\\":{\\"Browser\\":{\\"UserAgent\\":\\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36\\",\\"Vendor\\":\\"Google Inc.\\",\\"VendorSubID\\":\\"\\",\\"BuildID\\":\\"20030107\\",\\"CookieEnabled\\":true},\\"IEPlugins\\":{},\\"NetscapePlugins\\":{\\"PDF Viewer\\":\\"\\",\\"Chrome PDF Viewer\\":\\"\\",\\"Chromium PDF Viewer\\":\\"\\",\\"Microsoft Edge PDF Viewer\\":\\"\\",\\"WebKit built-in PDF\\":\\"\\"},\\"Screen\\":{\\"FullHeight\\":900,\\"AvlHeight\\":814,\\"FullWidth\\":1440,\\"AvlWidth\\":1440,\\"ColorDepth\\":30,\\"PixelDepth\\":30},\\"System\\":{\\"Platform\\":\\"MacIntel\\",\\"systemLanguage\\":\\"en-US\\",\\"Timezone\\":360}},\\"ExternalIP\\":\\"\\",\\"MESC\\":{\\"mesc\\":\\"mi': '2;cd=150;id=45;mesc=1493526;mesc=1810063\\"}},\\"TimeStamp\\":\\"1644350664021\\""}'
  }

  response = requests.post('https://api.fedex.com/user/v4/login', headers=headers, cookies=cookies, data=data)
  print(response.text)

  

get_origin_cookies()
